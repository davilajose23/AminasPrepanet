<!DOCTYPE html>
<html>
<head>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
  <!--  Import my own style -->
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <!--  Import animations -->
  <link rel="stylesheet" href="css/animate.min.css">
  <!--  Import sweet alert -->
  <link rel="stylesheet" href="css/sweetalert2.min.css">
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta charset="UTF-8">
  <title>Aminas Juegos</title>
  <link rel="shortcut icon" href="img/icono.png"/>
</head>

<body class="grey lighten-3">

  <!-- NavBar -->
  <div class="navbar">
    <nav>
      <div class="nav-wrapper blue-navbar">
        <a href="#!" class="brand-logo left hide-on-med-and-down"><img class="responsive-img center" src="img/logo.png" width="250px"></a>
        <a href="#!" class="brand-logo right hide-on-med-and-down"><img class="responsive-img " src="img/logoPrepanet.png" width="230px"></a>
        <a href="#!" class="brand-logo center"><img class="responsive-img" src="img/logoTecBlanco.png" width="230px"></a>
        <ul class="right hide-on-med-and-down">

        </ul>
      </div>
    </nav>
  </div>
  <!--/End NavBar -->
  <div class=" container">
   <div class="row">

    <!-- Tabs -->
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a target="_self" href="index.html"><i class="material-icons">home</i>Información</a></li>
        <li class="tab col s3"><a target="_self" class="active" href="juegos.html"><i class="material-icons">videogame_asset</i>Juegos</a></li>
        <li class="tab col s3"><a target="_self" href="quiz.html"><i class="material-icons">assignment</i>Quiz</a></li>
        <!-- <li class="tab col s3"><a target="_self"  href="about.html">Acerca de</a></li> -->
      </ul>
    </div>
    <!--/End Tabs -->

    <!-- Game Selector -->
    <div id="test2" class="col s12 center" >
      <!-- Seleccionar Game 1 -->
      <a class="waves-effect waves-light btn-large animated fadeIn" id="tab1">Adivina la estructura</a>
      <!-- Seleccionar Game 2 -->
      <a class="waves-effect waves-light btn-large animated btn-flat fadeIn" id="tab2">Adivina el nombre</a>
      
      
      <!-- Seleccionar Game 3 -->
      <a class="waves-effect waves-light btn-large animated btn-flat fadeIn" id="tab3">Completa la reacción</a>
      
    </div>
    <!--/End Game Selector -->
    
    <!-- ======================================================================================================== -->
    <!-- ================================================= JUEGO 1 ============================================== -->
    <!-- ======================================================================================================== -->
    <!-- Juego 1 HTML -->
    <div class="col s12 m12  animated zoomIn " id ="juego1" style="display: none;"> 
      <div class="card ">
        <div class="card-content ">
          <!-- Seccion de Sonido, Score, Vidas e Info  -->
          <p> 
            <!-- Sonido -->
            <span class="hov">
              <i class="material-icons" id="juego1Sound" >volume_off</i>
            </span>

            <!-- Score -->
            <b>Score:</b> <span id="juego1Score"></span>
            
            <!-- Vidas e Info -->
            <span class="right" id="juego1Vidas"> 
              <i class="material-icons cyan-text tooltipped" data-position="bottom" data-delay="50" data-tooltip="Selecciona la respuesta correcta">info</i>
            </span>
          </p>
          <!--/End Seccion de Sonido, Score, Vidas e Info  -->
          
          <!-- Seccion principal del juego -->
          <div class="center">

            <!-- Pregunta -->
            <h5 class="" id="juego1Pregunta"></h5>
            
            <!-- Respuestas -->
            <div class="row ">
                
              <div class="row">
                <!-- Respuesta 1 -->
                <div class="col s12 m6">
                  <div class="card-panel  hoverable juego1Respuesta grey lighten-2" data-num="1">
                    <img class="responsive-img center" src="" >
                    <p></p>
                  </div>
                </div>


                <!-- Respuesta 2 -->
                <div class="col s12 m6">
                  <div class="card-panel  hoverable juego1Respuesta grey lighten-2" data-num="2">
                    <img class="responsive-img center" src="" >
                  </div>
                </div>

              </div>

              <div class="row">
  
                <!-- Respuesta 3 -->
                <div class="col s12 m6">
                  <div class="card-panel  hoverable juego1Respuesta grey lighten-2" data-num="3">
                    <img class="responsive-img center" src="" >
                  </div>
                </div>

                <!-- Respuesta 4 -->
                <div class="col s12 m6">
                  <div class="card-panel  hoverable juego1Respuesta grey lighten-2" data-num="4">
                    <img class="responsive-img center" src="" >
                  </div>
                </div>
              
              </div>
            </div>
            <!--/End Respuestas -->
          </div>
          <!--/End Seccion principal del juego -->
          
          <!-- Boton de Continuar -->
          <button class="btn waves-effect waves-light right teal animated pulse" type="submit" name="action" id="juego1Continuar" style="display: none;">Continuar
          </button>

          <br>
          <br>

        </div>
      </div>
    </div>
    <!--/End Juego 1 -->


    <br>
    <br>
    <br>

    <!-- ======================================================================================================== -->
    <!-- ================================================= JUEGO 2 ============================================== -->
    <!-- ======================================================================================================== -->
    <!-- Juego 2 -->
    <div class="col s12 m12  animated zoomIn" id ="juego2" style="display: none;"> 
      <div class="card grey lighten-5">
        <div class="card-content ">

          <!--  Seccion de Sonido, Score, Vidas e Info -->
          <p>
            
            <!-- Sonido -->
            <span class="hov">
              <i class="material-icons" id="juego2Sound" >volume_off</i>
            </span>

            <!--  Score -->
            <b>Score:</b> <span id="juego2Score">0</span>
            
            <!--  Vidas -->
            <span class="right" id="juego2Vidas"><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i> 

              <!--  Info -->
              <i class="material-icons cyan-text tooltipped" data-position="bottom" data-delay="50" data-html="true" data-tooltip="De las opciones disponibles forma la respuesta <br>(el orden importa)">info</i></span>

            </p>
            <!--/End Seccion Sonido, Score, Vidas e Info -->

            <!--  Seccion principal del juego -->
            <div class="center" id="preguntaJuego2">

              <!--  Respuesta Correcta-->
              <h5 id="respuestaJuego2" class="animated fadeIn green-text"><br></h5>

              <!--  Pregunta -->
              <img class="responsive-img center" src="">
              <h4></h4>
              <br>

              <!--  Respuesta del Usuario -->
              <div id ="selectedChips" class="connectedSortable">
                
              </div>

              <!--  division -->
              <hr>
              <br>

              <!--  Opciones de respuesta -->
              <div id="unselectedChips" class="connectedSortable">
              </div>

            </div>
            <!--/End Seccion principal del juego -->
            <br>

            <!--  Boton de Evaluar -->
            <button class="btn waves-effect waves-light right teal animated pulse" id="evaluarJuego2">Evaluar</button>

            <br>
            <br>
          </div>
        </div>
      </div>
      <!--/End Juego 2  -->


      <!-- ====================================================================================================== -->
      <!-- ================================================= JUEGO 3 ============================================ -->
      <!-- ====================================================================================================== -->
      <!-- Juego 3 -->
      <div class="col s12 m12  animated zoomIn" id ="juego3" style="display: none;" > 
        <div class="card grey lighten-5">
          <div class="card-content ">

            <!--  Seccion de Sonido, Score, Vidas e Info -->
            <p>
              <!-- Sonido -->
              <span class="hov">
                <i class="material-icons" id="juego3Sound" >volume_off</i>
              </span>

              <!--  Score -->
              <b>Score:</b> <span id="juego3Score">0</span>

              <!--  Vidas -->
              <span class="right" id="juego3Vidas"><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i><i class="material-icons icon-red">favorite</i> 

                <!--  Info -->
                <i class="material-icons cyan-text tooltipped" data-position="bottom" data-delay="50" data-html="true" data-tooltip="Arrastra la respuesta al lugar que se indica">info</i></span>

              </p>
              <!--/End Seccion Sonido, Score, Vidas e Info -->

              <!--  Seccion principal juego 3 -->
              <div class="center" id="preguntaJuego3">

                <!--  Pregunta -->
                <div class="row center-align" >

                  <!--  Reacción src="img/juego3/pregunta1.png" -->
                  <img class="responsive-img center col s12 m7" src="" style="max-height:140px;width: auto;" >
                  <br>

                  <!--  Contenedor para arrastrar la respuesta -->
                  <div class="col s12 m5 droppable">
                    <div class="card-panel grey lighten-4 dashed " data-num="0" >
                      <p>Arrastra aqui la respuesta</p>
                    </div>
                  </div>
                </div>
                <!--/End Pregunta -->

                <!--  Respuesta 1 y 2 -->
                <div class="row " style="margin-bottom: 0;">
                  <!--  Respuesta 1 -->
                  <div class="col s6 ">
                    <div class="card-panel blue-grey lighten-4 juego3Respuesta "  style="padding: 5px;">
                      <img class="responsive-img center draggable hoverable" data-num="1" src="" style= "max-height: 100px;">
                    </div>
                  </div>
                  <!--  Respuesta 2 -->
                  <div class="col s6 ">
                    <div class="card-panel blue-grey lighten-4 juego3Respuesta "  style="padding: 5px;">
                      <img class="responsive-img center draggable hoverable" data-num="2" src="" style= "max-height: 100px;">
                    </div>
                  </div>
                </div>  

                <!--  Respuesta 3 y 4 -->
                <div class="row " style="margin-bottom: 0;">
                  <!--  Respuesta 3 -->
                  <div class="col s6 ">
                    <div class="card-panel blue-grey lighten-4  juego3Respuesta "   style="padding: 5px;">
                      <img class="responsive-img center draggable hoverable" data-num="3" src="" style= "max-height: 100px;">
                    </div>
                  </div>
                  <!--  Respuesta 4 -->
                  <div class="col s6 ">
                    <div class="card-panel blue-grey lighten-4  juego3Respuesta " style="padding: 5px;">
                      <img class="responsive-img center draggable hoverable" data-num="4" src="" style= "max-height: 100px;">
                    </div>
                  </div>
                </div>
                <!-- /End Respuesta 1,2,3 y 4 -->
              </div>
              <!--/End Seccion principal juego 3 -->

              <!--  Si existe un boton va aqui, Tambien dos <br> -->

              <!-- Boton de Continuar -->
              <br>
              
              
              <button class="btn waves-effect waves-light right teal animated pulse" type="submit" name="action" id="juego3Continuar" style="display: none;">Continuar
              </button>
             
             
              <br>
              <br>



            </div>
          </div>
        </div>
        <!--/End Juego 3-->


      </div>
      <!--/End row-->
    </div>
    <!--/End container-->
  <br><br><br>

    <!-- Modal Puntuacion Maxima -->
    <div id="juego1TopScore" class="modal">
      <div class="modal-content center">
        <h4>Puntuación Máxima: <br> <span id="juego1TopScore">100</span> </h4>
      </div>
      <div class="modal-footer">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Continuar</a>
      </div>
    </div>

    <!-- Modal Puntuacion Maxima juego 3-->
    <div id="juego3TopScore" class="modal">
      <div class="modal-content center">
        <h4>Puntuación Máxima: <br> <span id="juego3TopScoreText">100</span> </h4>
      </div>
      <div class="modal-footer">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Continuar</a>
      </div>
    </div>


    
  <!--  Import jquery  -->
  <script src="js/jquery-3.1.0.js" type="text/javascript"></script>
  <!--  Import function to play sound -->
  <script src='https://cdn.rawgit.com/admsev/jquery-play-sound/master/jquery.playSound.js'></script>
  <!--  Import jquery-ui-->
  <script src="js/jquery-ui.min.js" type="text/javascript"></script>
  <!--  Import jquery-ui touch punch-->
  <script src="js/jquery.ui.touch-punch.min.js"></script>
  <!--Import jQuery before materialize.js-->
  <script type="text/javascript" src="js/materialize.min.js"></script>
  <!--Import sweetalertjs-->
  <script type="text/javascript" src="js/sweetalert2.min.js"></script>


  <script>


  // =============================================== VARIABLES GLOBALES ===========================================
  // Variables globales Juego 1
  var preguntasJuego1;
  var juego1Score = 0;
  var juego1Vidas = 5;
  var numPreguntaJuego1;
  var juego1TopScore = 0;

  // variables globales Juego 2
  var preguntasJuego2;
  var numPreguntaJuego2 = 0;
  var juego2Score = 0;
  var enEsperaJuego2 = false;
  var juego2Vidas = 5;
  var colores = ["pink", "green", "red", "blue", "indigo", "teal", "cyan",  "light-blue", "light-green", "orange", "amber", "deep-orange", "blue-grey"];
  var juego2TopScore = 0;

  // variables globales Juego 3
  var preguntasJuego3;
  var numPreguntaJuego3 = 0;
  var juego3Score = 0;
  var enEsperaJuego3 = false;
  var juego3Vidas = 5;
  var juego3TopScore = 0;

  var contadorPreguntas = 1 ; // nose si se usa en algun lado

  // Variables globales generales
  var enEspera = false;
  var sonido = false;
  var juegoActivo = 1;


  $(document).ready(function(){
    
    // Modal Nose si se utiliza
    $('.modal-trigger').leanModal({
      dismissible: true, // Modal can be dismissed by clicking outside of the modal
      opacity: .5, // Opacity of modal background
      in_duration: 300, // Transition in duration
      out_duration: 200, // Transition out duration
      starting_top: '4%', // Starting top style attribute
      ending_top: '10%', // Ending top style attribute
      ready: function() {  }, // Callback for Modal open
      complete: function() {  } // Callback for Modal close
    });

  });

  // ============================================ INICIALIZACIÓN  ==============================================


  // Inicializacion para el juego 1
  cargaPreguntaInicial(0);
  contadorPreguntas = 0;
  $("#juego1Continuar").hide();


  // Inicialización para el juego 2
  getDataJuego2();
  $( "#selectedChips, #unselectedChips" ).sortable({
      connectWith: ".connectedSortable"
    }).disableSelection();

  $("#selectedChips").sortable({
    receive: function( event, ui ) {
      var indexColor =  Math.floor((Math.random() * colores.length) + 0);
      ui.item.addClass("white-text " + colores[indexColor] );
    }
  });

  $("#unselectedChips").sortable({
    receive: function( event, ui ) {
      ui.item.removeClass("white-text");

      for(var i = 0; i < colores.length ; i++){
         ui.item.removeClass(colores[i]);
      }
    }
  });

  // Inicialización para el juego 3
  getDataJuego3();

  // cuando se presiona Enter
  $(document).keyup(function(e){
    if((e.keyCode ==  13 || e.keyCode ==  32) && juegoActivo == 2) {
      buttonJuego2();
    }else if ((e.keyCode ==  13 || e.keyCode ==  32) && juegoActivo == 1) {
      clickJuego1Continuar();
    } else if ((e.keyCode ==  13 || e.keyCode ==  32) && juegoActivo == 3) {
      if ($('#juego3Continuar').is(":visible")) {
        $('#juego3Continuar').trigger('click');
      }
    }
  });

  // ============================================ SELECCIÓN  DE JUEGO ==============================================
 
  // Función Cuando se selecciona Juego 1
  $("#tab1").click(function(){
    animacion("#juego2", "zoomOut", 400); // Animación de salida Juego 2
    animacion("#juego3", "zoomOut", 400); // Animación de salida Juego 3
    $("#juego1").show(); // Muestra Juego 1
    juegoActivo = 1; // Cambia el juego activo a 1
    $("#tab1").removeClass("btn-flat");
    $("#tab2").addClass("btn-flat");
    $("#tab3").addClass("btn-flat");

  });

   // Función Cuando se selecciona Juego 2
  $("#tab2").click(function(){
    animacion("#juego1", "zoomOut", 400); // Animación de salida Juego 1
    animacion("#juego3", "zoomOut", 400); // Animación de salida Juego 3
    $("#juego2").show(); // Muestra Juego 2
    juegoActivo = 2; // Cambia el juego activo a 2

    $("#tab2").removeClass("btn-flat");
    $("#tab1").addClass("btn-flat");
    $("#tab3").addClass("btn-flat");

  });

  // Función Cuando se selecciona Juego 3
  $("#tab3").click(function(){
    animacion("#juego1", "zoomOut", 400); // Animación de salida Juego 1
    animacion("#juego2", "zoomOut", 400); // Animación de salida Juego 2
    $("#juego3").show(); // Muestra Juego 3
    juegoActivo = 3; // Cambia el juego activo a 3

    $("#tab3").removeClass("btn-flat");
    $("#tab2").addClass("btn-flat");
    $("#tab1").addClass("btn-flat");
  });

  // =================================================== SONIDO ==============================================

  // cuando se da click en el boton del sonido en el juego 1
  $("#juego1Sound").click(function(){
    Sonido();
  });

  // cuando se da click en el boton del sonido en el juego 2
  $("#juego2Sound").click(function(){
    Sonido();
  });

  // cuando se da click en el boton del sonido en el juego 3
  $("#juego3Sound").click(function(){
    Sonido();
  });


  // ============================================ FUNCIONES AUXILIARES =============================================
  
  // Funcion que agrega animación de salida a un objeto con cierto delay
  function animacion(objeto, anima, delay){
    $(objeto).addClass(anima).delay(delay).queue(function(next){
      $(objeto).hide();
      $(this).removeClass(anima);
      next();
    });
  }

  // Funcion que agrega animación de salida a un objeto con cierto delay
  function animacion2(objeto, anima, delay){
    $(objeto).addClass(anima).delay(delay).queue(function(next){
      $(objeto).hide();
      $(this).removeClass(anima);
      $(objecto).show();
      next();
    });
  }

  function modalSuccess(){
    swal({
        title: 'Correcto',
        timer: 2000,
        type: 'success',
        padding: 0,
        showConfirmButton:false
        //background: 'rgba(0,0,0,0)'
      }).done();
  }

  function modalError(){
    swal({
        title: 'Incorrecto',
        timer: 2000,
        type: 'error',
        
        padding: 0,
        showConfirmButton:false
        //background: 'rgba(0,0,0,0)'
      }).done();
  }

  function modalScore(puntaje){
    swal({
      title: 'Puntuación Máxima',
      text: puntaje.toString(),
      imageUrl: 'http://olegif.com/bin/gifs/00/15/87.gif',
      imageWidth: 400,
      imageHeight: 200,
      animation: false
    })
  }

  // Funcion que activa o desactiva el sonido del juego
  function Sonido(objeto){
    if(sonido){
      $("#juego1Sound").html("volume_off");
      $("#juego2Sound").html("volume_off");
      $("#juego3Sound").html("volume_off");
    }else{
      $("#juego1Sound").html("volume_up");
      $("#juego2Sound").html("volume_up");
      $("#juego3Sound").html("volume_up");
    }
    sonido = !sonido;
  }
  // =================================================== GET DATA ==============================================


  // Funcion que carga las preguntas del .json para el Juego 1
  function cargaPreguntaInicial(){
    $.ajax({
      url: 'data/juego1.json',
      type: 'GET',
      dataType: 'json',
      success: function(data){
        preguntasJuego1 = data['preguntas'];

        numPreguntaJuego1 = Math.floor((Math.random() * preguntasJuego1.length) + 0);
        p = preguntasJuego1[numPreguntaJuego1];
        $("#juego1Pregunta").html(p['pregunta']);

        /*
        $(".juego1Respuesta").eq(0).html(p['respuesta1']);
        $(".juego1Respuesta").eq(1).html(p['respuesta2']);
        $(".juego1Respuesta").eq(2).html(p['respuesta3']);
        $(".juego1Respuesta").eq(3).html(p['respuesta4']);
        */

        
        $(".juego1Respuesta > img").eq(0).attr('src', 'img/juego1/' + p['respuesta1']);
        $(".juego1Respuesta > img").eq(1).attr('src', 'img/juego1/' + p['respuesta2']);
        $(".juego1Respuesta > img").eq(2).attr('src', 'img/juego1/' + p['respuesta3']);
        $(".juego1Respuesta > img").eq(3).attr('src', 'img/juego1/' + p['respuesta4']);
        

        $("#juego1Score").html(juego1Score);

        for(var i = 0; i < juego1Vidas ; i++){
          $("#juego1Vidas").prepend('<i class="material-icons icon-red">favorite</i>');
        }

        $("#juego1").show();

      },
      error: function(errorMsg){
        console.log("Error en juego1.json");
      }

    });
  };

  // Función que carga las preguntas del .json para el Juego 2
  function getDataJuego2(){
    $.ajax({
      url: 'data/juego2.json',
      type: 'GET',
      dataType: 'json',
      success: function(data){
        preguntasJuego2 = data['preguntas']; // guarda todas las preguntas en la variable preguntasJuego2
        cargaPreguntasJuego2(); // carga una pregunta en el juego2
      },
      error: function(errorMsg){
        console.log("Error en juego2.json"); // muestra error en la consola si no se pudo obtener juego2.json
      }
    });
  }

  // Función que carga las preguntas del .json para el Juego 3
  function getDataJuego3() {
    $.ajax({
      url: 'data/juego3.json',
      type: 'GET',
      dataType: 'json',
      success: function(data){
        preguntasJuego3 = data['preguntas']; // guarda todas las preguntas en la variable preguntasJuego3
        cargaPreguntasJuego3(); // carga una pregunta en el juego3
      },
      error: function(errorMsg){
        console.log("Error en juego3.json"); // muestra error en la consola si no se pudo obtener juego3.json
      }
    });
  }

// ================================================== CARGA PREGUNTAS ==============================================

// Función que carga una pregunta en juego 1
function reloadPregunta(){

  // cuando queda 1 vida agrega animación de flash
  if(juego1Vidas == 1){
    $("#juego1Vidas").children().eq(0).addClass("flash animated infinite");
  }else{
     $("#juego1Vidas").children().each(function(){
      $(this).removeClass("flash animated infinite");
     })
  }
  
  $(".juego1Respuesta").each(function() {
    $( this ).removeClass( "red incorrecta green" ).addClass( "grey lighten-2");
  });

  numPreguntaJuego1 = Math.floor((Math.random() * preguntasJuego1.length) + 0);

  p = preguntasJuego1[numPreguntaJuego1];
  $("#juego1Pregunta").html(p['pregunta']);

/*
  $(".juego1Respuesta").eq(0).html(p['respuesta1']);
  $(".juego1Respuesta").eq(1).html(p['respuesta2']);
  $(".juego1Respuesta").eq(2).html(p['respuesta3']);
  $(".juego1Respuesta").eq(3).html(p['respuesta4']);
*/

  $(".juego1Respuesta > img").eq(0).attr('src', 'img/juego1/' + p['respuesta1']);
  $(".juego1Respuesta > img").eq(1).attr('src', 'img/juego1/' + p['respuesta2']);
  $(".juego1Respuesta > img").eq(2).attr('src', 'img/juego1/' + p['respuesta3']);
  $(".juego1Respuesta > img").eq(3).attr('src', 'img/juego1/' + p['respuesta4']);
  
  
  $("#juego1Score").html(juego1Score); // actualiza score
  
}




// Función que carga una pregunta en juego 2
function cargaPreguntasJuego2(){
 
  $("#juego2").addClass("zoomOut").delay(400).queue(function(next){
    $(this).removeClass("zoomOut");
    next();
  });

  // elimina los tags de la pregunta anterior
  $("#selectedChips").html("<br>");
  $("#unselectedChips").html("");

  // obtiene un numero random para la siguiente pregunta
  numPreguntaJuego2 = Math.floor((Math.random() * preguntasJuego2.length) + 0);
  var tags = preguntasJuego2[numPreguntaJuego2].tags;


  $("#preguntaJuego2 >h4").html("");
  $("#preguntaJuego2 >img").attr('src','');

  if (preguntasJuego2[numPreguntaJuego2].tipo == "imagen"){
    $("#preguntaJuego2 >img").attr('src', 'img/juego2/' + preguntasJuego2[numPreguntaJuego2].pregunta);  
  }else{
    $("#preguntaJuego2 >h4").html(preguntasJuego2[numPreguntaJuego2].pregunta);
  }

  

  // agrega cada uno de los tags a las opciones de respuestas
  $.each(tags, function(i, val){
     $("#unselectedChips").append('<div class="chip hoverable chip-unselected animated fadeIn">' + val.tag + '</div>');
   });

  $("#juego2Score").html(juego2Score); // Actualiza el score
}


// Función que carga una pregunta en juego 3
function cargaPreguntasJuego3() {
 $("#juego3Continuar").hide();

  numPreguntaJuego3 = Math.floor((Math.random() * preguntasJuego3.length) + 0);

  alert(numPreguntaJuego3);
  alert(preguntasJuego3[numPreguntaJuego3].pregunta);
  $("#preguntaJuego3 >div >img").attr('src', 'img/juego3/' + preguntasJuego3[numPreguntaJuego3].pregunta);

  p = preguntasJuego3[numPreguntaJuego3];

  $(".juego3Respuesta >img").eq(0).attr('src', 'img/juego3/' + p['respuesta1']);
  $(".juego3Respuesta >img").eq(1).attr('src', 'img/juego3/' + p['respuesta2']);
  $(".juego3Respuesta >img").eq(2).attr('src', 'img/juego3/' + p['respuesta3']);
  $(".juego3Respuesta >img").eq(3).attr('src', 'img/juego3/' + p['respuesta4']);

  $(".juego3Respuesta >img").eq(0).draggable('enable');
  $(".juego3Respuesta >img").eq(1).draggable('enable');
  $(".juego3Respuesta >img").eq(2).draggable('enable');
  $(".juego3Respuesta >img").eq(3).draggable('enable');

  $(".juego3Respuesta >img").eq(0).css('top', 'auto').css('left', 'auto');
  $(".juego3Respuesta >img").eq(1).css('top', 'auto').css('left', 'auto');
  $(".juego3Respuesta >img").eq(2).css('top', 'auto').css('left', 'auto');
  $(".juego3Respuesta >img").eq(3).css('top', 'auto').css('left', 'auto');

  $("#juego3Score").html(juego3Score); // actualiza score
  
}



// =================================================== RESET ==============================================

// resetea variables para el juego 1
function reset(){

  juego1Score = 0;
  juego1Vidas = 5;
  cargaPreguntaInicial(0);
  reloadPregunta();
  contadorPreguntas = 0;
  $("#juego1Continuar").hide();
  enEspera = false;

};

// resetea variables para el juego 2
function resetJuego2(){

  juego2Vidas = 5;
  for (var i = 0; i < juego2Vidas; i++) {
    $("#juego2Vidas").prepend('<i class="material-icons icon-red">favorite</i>');
  }
  juego2Score = 0;
  $("#juego2Score").html(juego2Score);
}


// resetea variables para el juego 3
function resetJuego3() {

  reacomodaJuego3();

  $("#juego3Continuar").hide();
  
  for (var i = juego3Vidas; i < 5; i++) {
    $("#juego3Vidas").prepend('<i class="material-icons icon-red">favorite</i>');
  }

  juego3Vidas = 5;
  juego3Score = 0;
  $("#juego3Score").html(juego3Score);

  $(".juego3Respuesta >img").eq(0).draggable('enable');
  $(".juego3Respuesta >img").eq(1).draggable('enable');
  $(".juego3Respuesta >img").eq(2).draggable('enable');
  $(".juego3Respuesta >img").eq(3).draggable('enable');

  $("#juego3Continuar").hide();

}




// =================================================== EVALUA ==============================================



$(".juego1Respuesta").click(function (){

      if(!enEspera){
        evalua(numPreguntaJuego1, $(this).data("num") );
      }else{
        console.log("falso, espera activa");
      }
    });

    $("#juego1Continuar").click(function(){
      clickJuego1Continuar();

    });

    function clickJuego1Continuar(){

      $("#juego1Continuar").hide();
      enEspera = false;
      $("#juego1").addClass("zoomOut").delay(300).queue(function(next){
        $(this).removeClass("zoomOut");
        reloadPregunta();
        next();
      });
    }

    function evalua(num,resp) {


      if (preguntasJuego1[num]['correcta'] == resp){
        $(".juego1Respuesta").eq(preguntasJuego1[num]['correcta'] - 1).removeClass( "red" ).addClass("green");
        juego1Score += 10;
        modalSuccess();
        if(sonido){
          $.playSound("sounds/correct");
        }
        reloadPregunta();

      }else{

        juego1Vidas --;
        modalError();
        if(sonido){
         $.playSound("sounds/error");
        }

        //quita vidas
        $("#juego1Vidas").children().eq(0).addClass("fadeOut").delay(1600).queue(function(next){
          //$(this).removeClass("bounceOut");
          $("#juego1Vidas").children()[0].remove();
          next();
        });

        //cambia los colores a las respuestas
        $(".juego1Respuesta").eq(resp - 1).addClass("red incorrecta").removeClass("grey lighten-2");
    

        $(".juego1Respuesta").eq(preguntasJuego1[num]['correcta'] - 1).removeClass("grey lighten-2").addClass("green");

        //muestra el boton de continuar
        $("#juego1Continuar").show();
        enEspera = true;
        if (juego1Vidas == 0){
          
          if (juego1Score > juego1TopScore )
            juego1TopScore = juego1Score;

          modalScore(juego1TopScore)

          reset();
        }
     }
    contadorPreguntas ++;
}

//--------------

$("#evaluarJuego2").click(function(){
  buttonJuego2();
});

function buttonJuego2(){

  if(enEsperaJuego2){
    enEsperaJuego2 = false;

    if(juego2Vidas == 0){
      //modal ya perdio
      if (juego2Score > juego2TopScore )
            juego2TopScore = juego2Score;

      modalScore(juego2TopScore)

      resetJuego2();
      //alert("ya perdio");
    }

    $("#evaluarJuego2").html("Evaluar");
    $("#respuestaJuego2").html("<br>");

    //recarga otra pregunta
    cargaPreguntasJuego2();


  }else if (evaluaJuego2()){
    juego2Score += 10;
    
    modalSuccess();
    cargaPreguntasJuego2();

  }else{
    
    modalError();

    var ans = '';

    for (var i = 0; i < preguntasJuego2[numPreguntaJuego2].respuesta.length ; i++) {
      ans += preguntasJuego2[numPreguntaJuego2].respuesta[i].tag;
    }
    $("#respuestaJuego2").html("<strong>Respuesta:</strong> " + ans );
    enEsperaJuego2 = true;
    $("#evaluarJuego2").html("continuar");

    //quita vidas
    $("#juego2Vidas").children().eq(0).addClass("fadeOut").delay(1600).queue(function(next){
      //$(this).removeClass("bounceOut");
      $("#juego2Vidas").children()[0].remove();
      next();
    });

    juego2Vidas --;
  }

}

function evaluaJuego2(){
  if (preguntasJuego2[numPreguntaJuego2].respuesta.length != $("#selectedChips").children().length - 1){
    
    return false;
  }

  for (var i = 0; i < preguntasJuego2[numPreguntaJuego2].respuesta.length ; i++) {
    if (preguntasJuego2[numPreguntaJuego2].respuesta[i].tag != $("#selectedChips").children().eq(i + 1).children('span').text()){
      return false;  
    }
  }
  return true;
}


// Evaluacion del juego 3

function reacomodaJuego3() {

  // regresa la casilla de respuestas a color gris
  $(".droppable").eq(0).children().removeClass("light-blue").addClass("grey");
 

  //cambia los colores a las respuestas
  $(".juego3Respuesta").each(function() {
    $( this ).removeClass( "red incorrecta" ).addClass("blue-grey lighten-4");
    $( this ).removeClass( "green" ).addClass("blue-grey lighten-4");
  });

  cargaPreguntasJuego3();
}

$("#juego3Continuar").click(function() {
  reacomodaJuego3();
});

function evaluaJuego3(respuestaJ3) {

  if(preguntasJuego3[numPreguntaJuego3].correcta == respuestaJ3) {

    modalSuccess();

    juego3Score += 10;
    if(sonido){
      $.playSound("sounds/correct");
    }

    $(".juego3Respuesta >img").eq(0).draggable('disable');
    $(".juego3Respuesta >img").eq(1).draggable('disable');
    $(".juego3Respuesta >img").eq(2).draggable('disable');
    $(".juego3Respuesta >img").eq(3).draggable('disable');
 
    // regresa la cassilla de repsuestas a color gris
    $(".droppable").eq(0).children().removeClass("light-blue").addClass("grey");
    cargaPreguntasJuego3();



    return true;
 
  } else {
    juego3Vidas --;
    
    if (juego3Vidas <= 0) {
      
      $(".juego3Respuesta").eq(preguntasJuego3[numPreguntaJuego3]['correcta'] - 1).removeClass( "red" ).addClass("green");
    

      if(sonido){
        $.playSound("sounds/error");
      }
        //quita vidas
      $("#juego3Vidas").children().eq(0).addClass("fadeOut").delay(1600).queue(function(next){
        //$(this).removeClass("bounceOut");
        $("#juego3Vidas").children()[0].remove();
        next();
      });
     //cambia los colores a las respuestas
      $(".juego3Respuesta").each(function() {
        $( this ).removeClass( "blue-grey lighten-4" ).addClass("red incorrecta");
      });
      
      if (juego3Score > juego3TopScore )
            juego3TopScore = juego3Score;

      modalScore(juego3TopScore)

      resetJuego3();
       
    } else {

      modalError();
      $(".juego3Respuesta").eq(preguntasJuego3[numPreguntaJuego3]['correcta'] - 1).removeClass( "red" ).addClass("green");
      
      if(sonido){
        $.playSound("sounds/error");
      }
      
      $(".juego3Respuesta >img").eq(0).draggable('disable');
      $(".juego3Respuesta >img").eq(1).draggable('disable');
      $(".juego3Respuesta >img").eq(2).draggable('disable');
      $(".juego3Respuesta >img").eq(3).draggable('disable');

      //quita vidas
      $("#juego3Vidas").children().eq(0).addClass("fadeOut").delay(1600).queue(function(next){
        //$(this).removeClass("bounceOut");
        $("#juego3Vidas").children()[0].remove();
        next();
      });
       //cambia los colores a las respuestas
      $(".juego3Respuesta").each(function() {
        $( this ).removeClass( "blue-grey lighten-4" ).addClass("red incorrecta");
      });
      $("#juego3Continuar").show();
      enEsperaJuego3 = true;
      return false;
    }
  }

}

$(document).on('click',".chip-unselected",function(){
  
  var indexColor =  Math.floor((Math.random() * colores.length) + 0);
  $("#selectedChips").append('<div class="chip hoverable ' + colores[indexColor] +' white-text chip-selected animated fadeIn"><span class="dataChip">' + $(this).text()  + '</span><i class="close1 material-icons">close</i></div>');
  $(this).remove();
});

$(document).on('click',".chip-selected",function(){

  //$("#unselectedChips").append('<div class="chip hoverable chip-unselected">' + propil + '</div>');
  var data_text = $(this).children("span").text();
  $("#unselectedChips").append('<div class="chip hoverable chip-unselected animated fadeIn">' + data_text + '</div>');

  $(this).remove();
});



// =================================================== FIN ===================================================
</script>

<script type="text/javascript">



$(".draggable").draggable
({  
  revert: 'invalid',

});

$( function() {
  $( ".draggable" ).draggable();

  $( ".droppable" ).droppable({
    over: function(event, ui) {

      $(this).eq(0).children().removeClass("grey")
      .addClass("light-blue");
      
      ui.draggable.data("current-droppable", $(this));  // Associate.
    },

    out: function(event, ui) {
      ui.draggable.removeData("current-droppable");     // Break association.
      $(this).eq(0).children().removeClass("light-blue")
      .addClass("grey");
    },
    drop: function( event, ui ) {
      evaluaJuego3(ui.draggable.attr("data-num"));
    }
  });

  


});

</script>
</body>
</html>